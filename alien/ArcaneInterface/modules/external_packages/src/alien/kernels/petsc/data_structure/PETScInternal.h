#ifndef ARCGEOSIM_NUMERICS_LINEARALGEBRA2_PETSCIMPL_PETSCINTERNAL_H
#define ARCGEOSIM_NUMERICS_LINEARALGEBRA2_PETSCIMPL_PETSCINTERNAL_H
/* Author : havep at Fri Jun  6 18:00:47 2008
 * Generated by createNew
 */

#include <alien/kernels/petsc/PETScPrecomp.h>

#include "petscmat.h"
#include "petscvec.h"

// For old PETSc version
#ifndef MATSOLVERSUPERLU_DIST
#define MATSOLVERSUPERLU_DIST MAT_SOLVER_SUPERLU_DIST
#endif // MATSOLVERSUPERLU_DIST

#ifndef MATSOLVERSUPERLU
#define MATSOLVERSUPERLU MAT_SOLVER_SUPERLU
#endif // MATSOLVERSUPERLU

//! Internal struct for PETSc implementation
/*! Separate data from header;
 *  can be only included by PETSc implementations
 */

/*---------------------------------------------------------------------------*/

namespace Alien::PETScInternal {

/*---------------------------------------------------------------------------*/

struct MatrixInternal
{
  typedef Mat matrix_type;

 public:
  MatrixInternal(bool parallel)
  : m_internal()
  , m_type((parallel) ? MATMPIAIJ : MATSEQAIJ)
  , m_parallel(parallel)
  {
  }

  ~MatrixInternal()
  {
    if (m_internal) {
#ifndef PETSC_MATDESTROY_NEW
      MatDestroy(m_internal);
#else /* PETSC_MATDESTROY_NEW */
      MatDestroy(&m_internal);
#endif /* PETSC_MATDESTROY_NEW */
    }
  }

 public:
  Mat m_internal;
  const MatType m_type;
  bool m_parallel = false;
};

/*---------------------------------------------------------------------------*/

struct VectorInternal
{
 public:
  typedef Vec vector_type;

 public:
  VectorInternal(const int local_size, const int local_offset, const int global_size,
      const bool parallel, MPI_Comm comm);
  ~VectorInternal();

 public:
  Vec m_internal;
  int m_offset = 0 ;
  bool m_parallel = false;
};

/*---------------------------------------------------------------------------*/

} // namespace Alien::PETScInternal

/*---------------------------------------------------------------------------*/

#endif /* ARCGEOSIM_NUMERICS_LINEARALGEBRA2_PETSCIMPL_PETSCINTERNAL_H */
