// -*- C++ -*-
#ifndef ALIEN_MTLIMPL_MTLVECTOR_H
#define ALIEN_MTLIMPL_MTLVECTOR_H
/* Author : mesriy at Tue Jul 24 14:28:21 2012
 * Generated by createNew
 */

#include <alien/kernels/mtl/MTLPrecomp.h>
#include <alien/core/impl/IVectorImpl.h>
#include <alien/data/ISpace.h>
#include <alien/distribution/VectorDistribution.h>

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

namespace Alien::MTL4Internal {

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

class VectorInternal;

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

} // namespace Alien::MTL4Internal

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

namespace Alien {

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

class MTLVector : public IVectorImpl
{
 public:
  typedef MTL4Internal::VectorInternal VectorInternal;

 public:
  MTLVector(const MultiVectorImpl* multi_impl);

  virtual ~MTLVector();

 public:
  void init(const VectorDistribution& dist, const bool need_allocate);
  void allocate();

  void free() {}
  void clear() {}

 public:
  void setValues(const int nrows, double const* values);

  void getValues(const int nrows, double* values) const;

 public:
  // Méthodes restreintes à usage interne de l'implémentation PETSc
  VectorInternal* internal() { return m_internal; }

  const VectorInternal* internal() const { return m_internal; }

  void dump() const;

 private:
  bool assemble();

 private:
  VectorInternal* m_internal;
  int m_local_offset;
};

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

} // namespace Alien

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

#endif /* ALIEN_MTLIMPL_MTLVECTOR_H */
