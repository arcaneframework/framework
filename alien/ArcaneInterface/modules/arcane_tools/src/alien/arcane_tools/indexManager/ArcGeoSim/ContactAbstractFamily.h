// -*- C++ -*-
#ifndef ARCGEOSIM_ARCGEOSIM_NUMERICS_LINEARALGEBRA2_INDEXMANAGER_CONTACTABSTRACTFAMILY_H
#define ARCGEOSIM_ARCGEOSIM_NUMERICS_LINEARALGEBRA2_INDEXMANAGER_CONTACTABSTRACTFAMILY_H
/* Author : havep at Mon Jun  3 12:49:08 2013
 * Generated by createNew
 */

#include <alien/Precomp.h>
#include <alien/UserObjects/Data/IIndexManager.h>

#include "ArcGeoSim/SurfaceUtils/ContactFamily.h"
#include <vector>

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

namespace Alien {

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

BEGIN_NAMESPACE(ArcaneTools)

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

/* Dans cette implémentation, implicitement le localId du i_ème item est i */
class ContactAbstractFamily : public IIndexManager::IAbstractFamily
{
 public:
  //! Construit une famille abstraite à partir d'une famille d'Contact
  ContactAbstractFamily(const ContactFamily& family, IIndexManager* manager);

  virtual ~ContactAbstractFamily();

 public:
  IIndexManager::IAbstractFamily* clone() const
  {
    return new ContactAbstractFamily(*this);
  }

 public:
  Integer maxLocalId() const { return m_family.maxLocalId(); }
  void uniqueIdToLocalId(
      Int32UniqueArrayView localIds, Int64ConstArrayView uniqueIds) const;
  IAbstractFamily::Item item(Integer localId) const;
  IntegerUniqueArray owners(Int32ConstArrayView localIds) const;
  Int64UniqueArray uids(Int32ConstArrayView localIds) const;
  Int32UniqueArray allLocalIds() const;

 private:
  const ContactFamily& m_family;
  IIndexManager* m_manager;

 private:
  static const Integer m_integer_size = 29;
  static const Int64 m_integer_mask = (Int64(1) << m_integer_size) - 1;
  static inline Int64 _form_unique_id(const ContactInternal& contact);
};

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

} // namespace Alien

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

#endif /* ARCGEOSIM_ARCGEOSIM_NUMERICS_LINEARALGEBRA2_INDEXMANAGER_CONTACTABSTRACTFAMILY_H \
          */
